\hypertarget{class_mailer}{\section{Mailer Class Reference}
\label{class_mailer}\index{Mailer@{Mailer}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_mailer_a095c5d389db211932136b53f25f39685}{\-\_\-\-\_\-construct} ()
\item 
\hyperlink{class_mailer_a12bcef5130168b80d3d52dc82213f19a}{send} ()
\item 
\hyperlink{class_mailer_aacb4d359fe0baad6a39ebda1613f1b3a}{add\-To} (\$email)
\item 
\hyperlink{class_mailer_a36316da1ac12624e7817cbc65ba51726}{add\-Cc} (\$email)
\item 
\hyperlink{class_mailer_ac320ba7834972b0109bec4627f18122a}{add\-Bcc} (\$email)
\item 
\hyperlink{class_mailer_a94bb8db8b58c3919ef8fcf714c217d30}{add\-From} (\$email)
\item 
\hyperlink{class_mailer_a305e6eb17fe7d49383d9ddeb57ea54be}{fetch\-Html} (\$url)
\item 
\hyperlink{class_mailer_aa8ccfd30329dbb3cd1b5740173072c9e}{msg\-Text} (\$msg, \$switch=false)
\item 
\hyperlink{class_mailer_afca153730fe26e45a98e1540f20b69f2}{add\-Subject} (\$subject='')
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 27 of file class.\-mailer.\-php.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_mailer_a095c5d389db211932136b53f25f39685}{\index{Mailer@{Mailer}!\-\_\-\-\_\-construct@{\-\_\-\-\_\-construct}}
\index{\-\_\-\-\_\-construct@{\-\_\-\-\_\-construct}!Mailer@{Mailer}}
\subsubsection[{\-\_\-\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-\-\_\-construct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_mailer_a095c5d389db211932136b53f25f39685}


Definition at line 36 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                             \{
                              $this->to;
                              $this->cc;
                              $this->bcc;
                              
                              $this->\hyperlink{class_mailer_afca153730fe26e45a98e1540f20b69f2}{addSubject}();
                              $this->html = \textcolor{keyword}{false};
               \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_mailer_ac320ba7834972b0109bec4627f18122a}{\index{Mailer@{Mailer}!add\-Bcc@{add\-Bcc}}
\index{add\-Bcc@{add\-Bcc}!Mailer@{Mailer}}
\subsubsection[{add\-Bcc}]{\setlength{\rightskip}{0pt plus 5cm}add\-Bcc (
\begin{DoxyParamCaption}
\item[{}]{\$email}
\end{DoxyParamCaption}
)}}\label{class_mailer_ac320ba7834972b0109bec4627f18122a}
Adds a Blind Carbon Copy recipient. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$email} & A valid email address \\
\hline
\end{DoxyParams}


Definition at line 139 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                              \{
                              $emails = explode(\textcolor{charliteral}{','}, $email);

                              \textcolor{keywordflow}{foreach} ($emails as $e) \{
                                             $e = trim($e);
                                             \textcolor{keywordflow}{if} ($this->rfcCheck($e)) \{
                                                            $this->bcc[] = $e;
                                             \} \textcolor{keywordflow}{else} \{
                                                            \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception
      (\textcolor{stringliteral}{"The \(\backslash\)$email parameter has a non RFC 2822 compliant addresses: \{$e\}"});
                                             \}
                              \}

                              \textcolor{keywordflow}{return} \textcolor{keyword}{true};
               \}
\end{DoxyCode}
\hypertarget{class_mailer_a36316da1ac12624e7817cbc65ba51726}{\index{Mailer@{Mailer}!add\-Cc@{add\-Cc}}
\index{add\-Cc@{add\-Cc}!Mailer@{Mailer}}
\subsubsection[{add\-Cc}]{\setlength{\rightskip}{0pt plus 5cm}add\-Cc (
\begin{DoxyParamCaption}
\item[{}]{\$email}
\end{DoxyParamCaption}
)}}\label{class_mailer_a36316da1ac12624e7817cbc65ba51726}
Adds a Carbon Copy recipient. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$email} & A valid email address. \\
\hline
\end{DoxyParams}


Definition at line 120 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                             \{
                              $emails = explode(\textcolor{charliteral}{','}, $email);

                              \textcolor{keywordflow}{foreach} ($emails as $e) \{
                                             $e = trim($e);
                                             \textcolor{keywordflow}{if} ($this->rfcCheck($e)) \{
                                                            $this->cc[] = $e;
                                             \} \textcolor{keywordflow}{else} \{
                                                            \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception
      (\textcolor{stringliteral}{"The \(\backslash\)$email parameter has a non RFC 2822 compliant addresses: \{$e\}"});
                                             \}
                              \}

                              \textcolor{keywordflow}{return} \textcolor{keyword}{true};
               \}
\end{DoxyCode}
\hypertarget{class_mailer_a94bb8db8b58c3919ef8fcf714c217d30}{\index{Mailer@{Mailer}!add\-From@{add\-From}}
\index{add\-From@{add\-From}!Mailer@{Mailer}}
\subsubsection[{add\-From}]{\setlength{\rightskip}{0pt plus 5cm}add\-From (
\begin{DoxyParamCaption}
\item[{}]{\$email}
\end{DoxyParamCaption}
)}}\label{class_mailer_a94bb8db8b58c3919ef8fcf714c217d30}
Sets a senders email address. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$email} & A valid email address. \\
\hline
\end{DoxyParams}


Definition at line 159 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                               \{
                              \textcolor{keywordflow}{if} ($this->rfcCheck($email)) \{
                                             $this->from = $email;
                                             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
                              \} \textcolor{keywordflow}{else} \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"The \(\backslash\)$email
       parameter has no RFC 2822 compliant addresses."});
                              \}
               \}
\end{DoxyCode}
\hypertarget{class_mailer_afca153730fe26e45a98e1540f20b69f2}{\index{Mailer@{Mailer}!add\-Subject@{add\-Subject}}
\index{add\-Subject@{add\-Subject}!Mailer@{Mailer}}
\subsubsection[{add\-Subject}]{\setlength{\rightskip}{0pt plus 5cm}add\-Subject (
\begin{DoxyParamCaption}
\item[{}]{\$subject = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_mailer_afca153730fe26e45a98e1540f20b69f2}
Adds a subject to the email. If there is no subject the time will be used. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$subject} & The subject of the email \\
\hline
\end{DoxyParams}


Definition at line 199 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                                       \{
                              \textcolor{keywordflow}{if} (strlen($subject) > 78) \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{'The subject
       cannot be longer than 78 characters.'});
                              \}

                              \textcolor{keywordflow}{if} ($subject == \textcolor{stringliteral}{''}) \{
                                             $this->subject = time();
                              \} \textcolor{keywordflow}{else} \{
                                             $this->subject = $subject;
                              \}
               \}
\end{DoxyCode}
\hypertarget{class_mailer_aacb4d359fe0baad6a39ebda1613f1b3a}{\index{Mailer@{Mailer}!add\-To@{add\-To}}
\index{add\-To@{add\-To}!Mailer@{Mailer}}
\subsubsection[{add\-To}]{\setlength{\rightskip}{0pt plus 5cm}add\-To (
\begin{DoxyParamCaption}
\item[{}]{\$email}
\end{DoxyParamCaption}
)}}\label{class_mailer_aacb4d359fe0baad6a39ebda1613f1b3a}
Adds a primary recipient.


\begin{DoxyParams}[1]{Parameters}
string & {\em \$email} & A valid email address. \\
\hline
\end{DoxyParams}


Definition at line 101 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                             \{
                              $emails = explode(\textcolor{charliteral}{','}, $email);

                              \textcolor{keywordflow}{foreach} ($emails as $e) \{
                                             $e = trim($e);
                                             \textcolor{keywordflow}{if} ($this->rfcCheck($e)) \{
                                                            $this->to[] = $e;
                                             \} \textcolor{keywordflow}{else} \{
                                                            \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception
      (\textcolor{stringliteral}{"The \(\backslash\)$email parameter has a non RFC 2822 compliant addresses: \{$e\}"});
                                             \}
                              \}

                              \textcolor{keywordflow}{return} \textcolor{keyword}{true};
               \}
\end{DoxyCode}
\hypertarget{class_mailer_a305e6eb17fe7d49383d9ddeb57ea54be}{\index{Mailer@{Mailer}!fetch\-Html@{fetch\-Html}}
\index{fetch\-Html@{fetch\-Html}!Mailer@{Mailer}}
\subsubsection[{fetch\-Html}]{\setlength{\rightskip}{0pt plus 5cm}fetch\-Html (
\begin{DoxyParamCaption}
\item[{}]{\$url}
\end{DoxyParamCaption}
)}}\label{class_mailer_a305e6eb17fe7d49383d9ddeb57ea54be}
Gets H\-T\-M\-L for a \$url and repalces anything in the body of the email with the H\-T\-M\-L that it fetched. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$url} & the url of an html file for the email body. \\
\hline
\end{DoxyParams}


Definition at line 173 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                               \{
                              $tempHtml = file\_get\_contents($url);

                              \textcolor{keywordflow}{if} (isset($tempHtml)) \{
                                             $this->html = \textcolor{keyword}{true};
                                             $this->body = $tempHtml;
                              \} \textcolor{keywordflow}{else} \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"Failed to
       capture data from "} . $url);
                              \}
               \}
\end{DoxyCode}
\hypertarget{class_mailer_aa8ccfd30329dbb3cd1b5740173072c9e}{\index{Mailer@{Mailer}!msg\-Text@{msg\-Text}}
\index{msg\-Text@{msg\-Text}!Mailer@{Mailer}}
\subsubsection[{msg\-Text}]{\setlength{\rightskip}{0pt plus 5cm}msg\-Text (
\begin{DoxyParamCaption}
\item[{}]{\$msg, }
\item[{}]{\$switch = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{class_mailer_aa8ccfd30329dbb3cd1b5740173072c9e}
Sets the body of the email to text. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$msg} & a string for the body \\
\hline
boolean & {\em \$switch} & an optional parameter for overloading \$this-\/$>$html \\
\hline
\end{DoxyParams}


Definition at line 189 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                                              \{
                              $this->html = $switch;
                              $this->body = $msg;
               \}
\end{DoxyCode}
\hypertarget{class_mailer_a12bcef5130168b80d3d52dc82213f19a}{\index{Mailer@{Mailer}!send@{send}}
\index{send@{send}!Mailer@{Mailer}}
\subsubsection[{send}]{\setlength{\rightskip}{0pt plus 5cm}send (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_mailer_a12bcef5130168b80d3d52dc82213f19a}
Sends the email.

\begin{DoxyReturn}{Returns}
bool Was the email successfully sent? 
\end{DoxyReturn}


Definition at line 50 of file class.\-mailer.\-php.


\begin{DoxyCode}
                                      \{
                              $headers = \textcolor{stringliteral}{""};

                              \textcolor{keywordflow}{if} (count($this->from) < 1) \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{'You forgot to
       addFrom();'});
                              \}

                              \textcolor{keywordflow}{if} (count($this->to) < 1) \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"You forgot to
       addTo();"});
                              \}

                              \textcolor{keywordflow}{if} (strlen($this->body) < 1) \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"You forgot to
       add content."});
                              \}

                              \textcolor{keywordflow}{if} (!isset($this->subject)) \{
                                             $this->\hyperlink{class_mailer_afca153730fe26e45a98e1540f20b69f2}{addSubject}();
                              \}

                              \textcolor{comment}{// To send HTML mail, the Content-type header
       must be set}
                              \textcolor{keywordflow}{if} ($this->html) \{
                                             $headers  .= \textcolor{stringliteral}{'MIME-Version: 1.0'} .
       \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"};
                                             $headers .= \textcolor{stringliteral}{'Content-type:
       text/html; charset=iso-8859-1'} . \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"};
                              \}

                              \textcolor{comment}{// Add From}
                              $headers .= \textcolor{stringliteral}{'From: '} . $this->from . \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"};;

                              \textcolor{comment}{// Add CC's if there are any}
                              \textcolor{keywordflow}{if} (isset($this->cc)) \{
                                             $headers .= \textcolor{stringliteral}{'Cc: '} . implode(\textcolor{charliteral}{','}, 
      $this->cc) . \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"};
                              \}

                              \textcolor{comment}{// Add BCC's if there are any}
                              \textcolor{keywordflow}{if} (isset($this->bcc)) \{
                                             $headers .= \textcolor{stringliteral}{'Bcc: '} . implode(\textcolor{charliteral}{','},
       $this->bcc) . \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"};
                              \}

                              \textcolor{comment}{// Mail it}
                              \textcolor{keywordflow}{if} (!mail(implode(\textcolor{stringliteral}{","}, $this->to), $this->subject
      , $this->body, $headers)) \{
                                             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"Mail was not
       sent."});
                              \} \textcolor{keywordflow}{else} \{
                                             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
                              \}
               \}
\end{DoxyCode}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
modules/disabled/mailer/\hyperlink{class_8mailer_8php}{class.\-mailer.\-php}\end{DoxyCompactItemize}
